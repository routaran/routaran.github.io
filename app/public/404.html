<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Pickleball Tracker</title>
    <script>
      // Single Page Apps for GitHub Pages
      // MIT License
      // https://github.com/rafgraph/spa-github-pages
      // This script takes the current url and converts the path and query
      // string into just a query string, and then redirects the browser
      // to the new url with only a query string and hash fragment
      var pathSegmentsToKeep = 0;

      var l = window.location;

      // Special handling for auth callback with hash
      if (l.pathname === "/auth/callback" && l.hash.includes("access_token")) {
        // For auth callbacks, redirect directly to root with the hash preserved
        l.replace(
          l.protocol +
            "//" +
            l.hostname +
            (l.port ? ":" + l.port : "") +
            "/" +
            l.hash
        );
      } else {
        // Standard SPA redirect for other routes
        l.replace(
          l.protocol +
            "//" +
            l.hostname +
            (l.port ? ":" + l.port : "") +
            l.pathname
              .split("/")
              .slice(0, 1 + pathSegmentsToKeep)
              .join("/") +
            "/?/" +
            l.pathname
              .slice(1)
              .split("/")
              .slice(pathSegmentsToKeep)
              .join("/")
              .replace(/&/g, "~and~") +
            (l.search ? "&" + l.search.slice(1).replace(/&/g, "~and~") : "") +
            l.hash
        );
      }
    </script>
  </head>
  <body></body>
</html>
